# デバイスドライバに関して

[概要]
- 当初はLED３つを点灯させることを目的としていましたが、他の方で同じことをなさっているケースが多いと聞き、
急場しのぎのような仕様ですが、突発的に浮かんだアイデアコマンドを形にしました。


# 材料
- ブレッドボード
- Raspberry Pi 4
- LED × 3　(赤・黄・緑)
- 200Ωの抵抗 × 3
- ジャンパコード(オスメス) 6本
- その他通信用ケーブル

# 準備 (部品類)
1.LEDをブレッドボードの任意の場所に差し込む。

2.抵抗をブレッドボードに差し込む。この時、抵抗の片側はLEDの足の短い方へ通電するように差し込む。

3.Raspberry Pi 4のGPIO25,24,18にジャンパコード(メス)を差し込み、オスをLEDの足の長い方に通じるようにする。

# 準備 (プログラム)
1.
```sh
git clone https://github.com/mekameka2020/robot-system2020.git 
```
と打ち込む。

➝このリポジトリのクローンを作成する

2.
```sh
make
```
と打ち込む
➝カーネルモジュールの作成
(しばし待機)

※万一、
```sh
「Makefile:4: *** missing separator (did you mean TAB instead of 8 spaces?).  Stop.」
```
という表示があった場合は、Makefile内のスペースをTabに変更すること。

3.

```sh
sudo insmod myled.ko
```
と打ち込む

➝カーネルモジュールのインストールを行う。

※もし、古いモジュールとカーネルモジュールがある場合は一度，以下のコマンドを打ち込み新しいモジュールの作成を行う。
```sh
sudo rmmod myled　
```
➝カーネルモジュールのアンインストール
```sh
make clean　
```
➝カーネルモジュールの消去

4.
```sh
sudo chmod 666 /dev/myled0
```
→"myled0"権限を変更する

⇒以下の#使い方が動かせるようになる。


# 使い方
1.
```sh
 echo 1 < /dev/myled0 
```
と打ち込むと赤色LEDが点灯

2. 
```sh
echo 2 < /dev/myled0 
```
と打ち込むと黄色LEDが点灯

3. 
```sh
echo 3 < /dev/myled0 
```
と打ち込むと緑色LEDが点灯

4. 
```sh
echo s < /dev/myled0 
```
と打ち込むと

1)赤→黄→緑の順にLEDが点灯
  
2)すべてのLEDが一瞬だけ点灯しすぐに消灯

3)10数秒後LEDが6回点滅し消灯する

5. 
```sh
echo 0 < /dev/myled0 
```
と打ち込むと全てのLEDが消灯

# コードの書き方の参照にした方
- knr2(nakamura ryo)

# READMEの書き方の参照をした方
- TanapolHongsuwan

# 反省点
- ピン配列の図を上下逆さまに見ていたためそれに気づくのに3～4時間を費やしてしまったこと。
- 提出方法を確認せずに期日に提出することになったこと。
- ライセンスに対する理解がまるでなってなかったこと。
